@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  .font-roboto {
    font-family: 'Roboto', sans-serif;
  }
}

@layer components {
  .container {
    @apply mx-auto px-10 lg:px-4 max-w-full md:max-w-[112.5rem];
  }

  .container-max {
    @apply mx-auto;
  }

  /* Floating label styles - exact match from design */
  .floating-label-group {
    position: relative;
  }

  /* Prevent form element layout shifts */
  .floating-label-group input,
  .floating-label-group select {
    min-height: 3.5rem;
  }

  .floating-label {
    position: absolute;
    pointer-events: none;
    left: 2.25rem;
    top: 50%;
    transform: translateY(-50%);
    transition: all 0.2s ease;
    font-size: 1.94rem;
    color: #666666;
    padding: 0 0.25rem;
  }

  @media (max-width: 639px) {
    .floating-label {
      font-size: 2.4rem;
    }
  }

  .floating-label-group input:focus ~ .floating-label,
  .floating-label-group input:not(:placeholder-shown) ~ .floating-label,
  .floating-label-group select:focus ~ .floating-label,
  .floating-label-group select:valid ~ .floating-label,
  .floating-label-group.always-float .floating-label {
    top: 1.2rem;
    transform: translateY(-50%);
    font-size: 1.2rem;
    color: #666666; /* at rest, same as other inputs */
    z-index: 1;
  }
  .floating-label-group.always-float:focus-within .floating-label {
    color: #976987; /* match design focus color */
  }
  /* CollectJS container styling - fixed height to prevent expansion */
  #card-number-field,
  #card-expiry-field,
  #card-cvv-field {
    height: 5.5rem; /* Fixed height to match design py-7 */
    max-height: 5.5rem; /* Prevent any expansion */
    display: flex;
    align-items: stretch;
    padding: 0; /* Remove container padding */
    overflow: hidden; /* Prevent iframe from expanding container */
  }

  /* Match floating labels to rest of form styling */
  .floating-label-group:has(#card-number-field) .floating-label,
  .floating-label-group:has(#card-expiry-field) .floating-label,
  .floating-label-group:has(#card-cvv-field) .floating-label {
    top: 1.2rem; /* Match standard form floating label position */
    transform: translateY(-50%);
    font-size: 1.2rem;
    color: #976987; /* Match design focus color like other form labels */
    z-index: 1;
  }

  /* Highlight border on focus within iframe */
  .floating-label-group:has(#card-number-field):focus-within > #card-number-field,
  .floating-label-group:has(#card-expiry-field):focus-within > #card-expiry-field,
  .floating-label-group:has(#card-cvv-field):focus-within > #card-cvv-field {
    border-color: #976987;
  }

  /* Fixed iframe height to prevent expansion */
  #card-number-field iframe,
  #card-expiry-field iframe,
  #card-cvv-field iframe {
    height: 5.5rem !important;
    max-height: 5.5rem !important;
    width: 100% !important;
    border: none !important;
    overflow: hidden !important;
  }

  @media (max-width: 639px) {
    .floating-label-group:has(#card-number-field) .floating-label,
    .floating-label-group:has(#card-expiry-field) .floating-label,
    .floating-label-group:has(#card-cvv-field) .floating-label {
      top: 1.2rem; /* Match standard form mobile positioning */
      font-size: 1.2rem; /* Consistent mobile font size */
    }
  }


  .floating-label-group input:focus ~ .floating-label,
  .floating-label-group input:not(:placeholder-shown) ~ .floating-label,
  .floating-label-group select:focus ~ .floating-label,
  .floating-label-group select:valid ~ .floating-label,
  .floating-label-group input:focus ~ span,
  .floating-label-group input:not(:placeholder-shown) ~ span,
  .floating-label-group select:focus ~ span,
  .floating-label-group select:valid ~ span {
    font-size: 1.2rem;
    color: #976987;
    z-index: 1;
  }

  .floating-label-group input:focus,
  .floating-label-group select:focus {
    border-color: #976987;
  }

  /* Adjust ZIP code and CVV labels in their default placeholder state */
  #zipCode:placeholder-shown ~ .floating-label,
  #cvv:placeholder-shown ~ .floating-label {
    /* Additional styling if needed */
  }

  /* When ZIP code or CVV is focused or has value, use the same floating position as other fields */
  #zipCode:focus ~ .floating-label,
  #zipCode:not(:placeholder-shown) ~ .floating-label,
  #cvv:focus ~ .floating-label,
  #cvv:not(:placeholder-shown) ~ .floating-label {
    top: 1.2rem;
    transform: translateY(-50%);
    font-size: 1.2rem;
    color: #976987;
    background: white;
    z-index: 1;
  }

  /* Error state styles */
  .input-error {
    border-color: #dc2626 !important;
  }

  .error-message {
    color: #dc2626;
    font-size: 1.75rem;
    margin-top: 0.5rem;
    font-weight: 600;
    margin-left: 5%;
  }

  .floating-label-group:has(.input-error:placeholder-shown) label.floating-label {
    top: 37% !important;
  }

  .floating-label-group:has(.input-error:placeholder-shown) input:focus ~ .floating-label span {
    top: 37% !important;
  }

  .floating-label-group input:focus ~ .floating-label span,
  .floating-label-group input:not(:placeholder-shown) ~ .floating-label,
  .floating-label-group input:not(:placeholder-shown) ~ .floating-label span {
    font-size: 1.2rem;
    color: #976987;
    z-index: 1;
  }

  /* Google Places Autocomplete dropdown */
  .pac-container {
    z-index: 1051;
    border-radius: 0.75rem;
    border: 3px solid #cdcdcd;
    margin-top: 0.5rem;
    font-family: inherit;
  }

  .pac-item {
    padding: 0.75rem 1rem;
    font-size: 1.6rem;
    border-bottom: 1px solid #e5e5e5;
  }

  .pac-item:hover {
    background-color: #f5f5f5;
  }

  .pac-item-selected {
    background-color: #e5e5e5;
  }

  /* CollectJS field containers — minimal styling, let CollectJS handle sizing */
  #card-number-field,
  #card-expiry-field,
  #card-cvv-field {
    position: relative;
    z-index: 1;
    width: 100%;
    /* Let CollectJS determine natural height based on its internal padding */
  }

  /* CollectJS iframe styling — inherit from container */
  #card-number-field iframe,
  #card-expiry-field iframe,
  #card-cvv-field iframe {
    width: 100% !important;
    height: 100% !important;
    border: none !important;
    background: transparent !important;
  }

  /* CollectJS iframe sizing — let CollectJS handle dimensions naturally */
  #card-number-field iframe,
  #card-expiry-field iframe,
  #card-cvv-field iframe {
    width: 100% !important;
    border: none !important;
    background: transparent !important;
    display: block !important;
  }

  /* Mobile responsive styling for CollectJS inputs - match design exactly */
  @media (max-width: 639px) {
    #card-number-field iframe input,
    #card-expiry-field iframe input,
    #card-cvv-field iframe input {
      font-size: 41.6px !important;
      line-height: 1 !important;
      color: #666666 !important;
      font-weight: 400 !important;
    }
  }

  /* Desktop styling for CollectJS inputs - match design exactly */
  @media (min-width: 640px) {
    #card-number-field iframe input,
    #card-expiry-field iframe input,
    #card-cvv-field iframe input {
      font-size: 31.04px !important;
      line-height: 1 !important;
      color: #666666 !important;
      font-weight: 400 !important;
      padding: 28px 36px !important;
    }
  }



  .form-select {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAQCAYAAAAMJL+VAAAABGdBTUEAALGPC/xhBQAAAQtJREFUOBG1lEEOgjAQRalbGj2OG9caOACn4ALGtfEuHACiazceR1PWOH/CNA3aMiTaBDpt/7zPdBKy7M/DCL9pGkvxxVp7KsvyJftL5rZt1865M+Ucq6pyyF3hNcI7Cuu+728QYn/JQA5yKaempxuZmQngOwEaYx55nu+1lQh8GIatMGi+01NwBcEmhxBqK4nAPZJ78K0KKFAJmR3oPp8+Iwgob0Oa6+TLoeCvRx+mTUYf/FVBGTPRwDkfLxnaSrRwcH0FWhNOmrkWYbE2XEicqgSa1J0LQ+aPCuQgZiLnwewbGuz5MGoAhcIkCQcjaTBjMgtXGURMVHC1wcQEy0J+Zlj8bKAnY1/UzDe2dbAVqfXn6wAAAABJRU5ErkJggg==");
    background-size: 1.8rem;
    background-position: right 1.7rem center;
  }

  /* Viewport-based font sizing */
  html {
    font-size: 2.1vw;
  }

  @media (min-width: 768px) {
    html {
      font-size: 0.738vw;
    }
  }

  /* Limit viewport-based font sizes on large screens */
  @media (min-width: 1600px) {
    html {
      font-size: 11.8px !important;
    }
  }

  /* Prevent layout shift for logo */
  img.w-110 {
    aspect-ratio: 220 / 60;
    height: auto;
    display: block;
    min-height: 60px;
  }

  /* Correct aspect ratio for 6-bottles image */
  img[src*="6-bottles"] {
    aspect-ratio: 181 / 144;
    object-fit: contain;
  }
}